<!DOCTYPE html>
<html>
<body>

<style>
    html,
    body,
    #container {
        width: 100%;
        height: 100%;
        margin: 0px;
    }
</style>

<div id="container" style="width:50%;height:50%;margin: 100px auto"></div>
<script type="text/javascript" src='//webapi.amap.com/maps?v=1.4.3&key=ec1f87c680481e676984787adf35eef6'></script>
<!-- UI组件库 1.0 -->
<script src="//webapi.amap.com/ui/1.0/main.js?v=1.0.11"></script>
<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
    
  //创建地图
  var map = new AMap.Map('container', {
    resizeEnable: true,
    zoom: 4
  });

  AMapUI.load(['ui/misc/PathSimplifier', 'lib/$'], function (PathSimplifier, $) {

    if (!PathSimplifier.supportCanvas) {
      alert('当前环境不支持 Canvas！');
      return;
    }

    var pathSimplifierIns = new PathSimplifier({
      zIndex: 100,
      autoSetFitView: true,
      map: map, //所属的地图实例

      getPath: function (pathData, pathIndex) {

        return pathData.path;
      },
      getHoverTitle: function (pathData, pathIndex, pointIndex) {

        if (pointIndex >= 0) {
          //point
          return pathData.name + '，点：' + pointIndex + '/' + pathData.path.length;
        }

        return pathData.name + '，点数量' + pathData.path.length;
      },
      renderOptions: {

        renderAllPointsIfNumberBelow: 100, //绘制路线节点，如不需要可设置为-1
        "pathNavigatorStyle": {
          "initRotateDegree": 0,
          "width": 16,
          "height": 16,
          "autoRotate": true,
          "lineJoin": "round",
          "content": "circle",
          "fillStyle": "#087EC4",
          "strokeStyle": "#116394",
          "lineWidth": 1,
          "pathLinePassedStyle": {
            "lineWidth": 2,
            "strokeStyle": "rgba(8, 126, 196, 1)",
            "borderWidth": 1,
            "borderStyle": "#eeeeee",
            "dirArrowStyle": false
          }
        }
      }
    });

    window.pathSimplifierIns = pathSimplifierIns;

    //设置数据
    pathSimplifierIns.setData([{
      name: '广安门内地铁站路线',
      path: 
        [
        [116.351027, 39.896937],
        [116.350834, 39.897579],
        [116.351799, 39.897711],
        [116.352937, 39.897769],
        [116.352958, 39.896871],
        [116.353001, 39.896048],
        [116.353065, 39.893925],
        [116.353098, 39.89227],
        [116.355211, 39.892286],
        [116.356681, 39.892451],
        [116.356659, 39.891665],
        [116.356659, 39.890084],
        [116.35667, 39.889434],
        [116.358204, 39.889418]
      ]
    }]);

    //对第一条线路（即索引 0）创建一个巡航器
    var navg1 = pathSimplifierIns.createPathNavigator(0, {
      loop: true, //循环播放
      speed: 500 //巡航速度，单位千米/小时
    });
    navg1.start();
  });
</script>
</body>
</html>
